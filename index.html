<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kontak Darurat Desa - Desa Sendangharjo, Kecamatan Ngasem, Kabupaten Bojonegoro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    .card i.contact-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .card-title {
      font-weight: bold;
      font-size: 18px;
    }

    .contact-info {
      display: flex;
      align-items: start;
      gap: 10px;
      margin-bottom: 10px;
    }

    .contact-info i {
      font-size: 18px;
      width: 24px;
      text-align: center;
      color: #0d6efd;
      margin-top: 3px;
    }

    .contact-details small {
      font-size: 13px;
      color: #6c757d;
      margin-bottom: 2px;
    }

    .contact-details a {
      text-decoration: none;
      color: #212529;
      font-weight: 500;
    }

    .contact-details a:hover {
      color: #0d6efd;
    }

    /* Warna ikon per fungsi */
    .icon-landmark   { color: #007bff; }
    .icon-nurse      { color: #28a745; }
    .icon-shield     { color: #ffc107; }
    .icon-fire       { color: #dc3545; }
    .icon-recycle    { color: #17a2b8; }
    .icon-map        { color: #6f42c1; }

    footer {
      text-align: center;
      font-size: 14px;
      color: #6c757d;
      margin-top: 40px;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container py-5">
    <div class="mb-4">
      <div class="d-flex align-items-center mb-3">
        <div class="me-3">
          <i class="fas fa-vcard fa-3x text-danger"></i>
        </div>
        <div>
          <h4 class="fw-bold mb-0">Kontak Darurat Desa</h4>
          <medium class="text-muted fw-bold">Desa Sendangharjo, Kecamatan Ngasem, Kabupaten Bojonegoro</medium>
        </div>
      </div>
      <p class="text-muted">
        Halaman ini menyediakan informasi kontak cepat untuk layanan penting desa, seperti kesehatan, keamanan, penanggulangan bencana, hingga pariwisata lokal.
      </p>
    </div>
    <div id="loading" class="text-center my-5">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-2 text-muted">Memuat data kontak darurat...</p>
</div>
    <div class="row row-cols-1 row-cols-md-3 g-4" id="contact-container"></div>
  </div>

  <footer class="mt-2 mb-4">
    Dibuat dengan ❤️ oleh <strong>KKM 2025</strong> <a href="https://ikippgribojonegoro.ac.id/" target="_blank"><strong>IKIP PGRI Bojonegoro</strong></a>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <div id="loadData">
  <script>
    const loading = document.getElementById("loading");
    const container = document.getElementById("contact-container");

    fetch('https://opensheet.elk.sh/1k6Hy8xuTYVu42fa1v8YeFvSOsYt_Dz4iN1X307TEYnk/Kontak')
    .then((res) => {
      if (!res.ok) {
        throw new Error("Sheet tidak ditemukan atau tidak dipublikasikan.");
      }
      return res.json();
    })
    .then(data => {
      loading.style.display = "none";
      data.forEach(item => {
        let setIcon = item.icon || 'info-circle';
        const card = `
        <div class="col">
        <div class="card text-center h-100 shadow-sm p-3">
          <div class="card-body">
            <i style="color:${item.warna};" class="fas fa-${setIcon} contact-icon"></i>
            <div class="card-title">${item.nama}</div>
            <hr>
            <div class="text-start">
              <div class="contact-info">
                <i class="fas fa-phone"></i>
                <div class="contact-details">
                  <small>Telepon</small>
                  <a href="tel:${item.telepon}">${item.telepon}</a>
                </div>
              </div>
              <div class="contact-info">
                <i class="fab fa-whatsapp"></i>
                <div class="contact-details">
                  <small>WhatsApp</small>
                  <a href="https://wa.me/${item.whatsapp}" target="_blank">Klik untuk chat</a>
                </div>
              </div>
              <div class="contact-info">
                <i class="fas fa-envelope"></i>
                <div class="contact-details">
                  <small>Email</small>
                  <a href="mailto:${item.email}">${item.email}</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
        `;
        container.innerHTML += card;
      });
    }).catch((err) => {
      loading.innerHTML = `
        <div class="alert alert-danger w-50 mx-auto">
          <strong>Gagal memuat data:</strong><br>${err.message}
          <br><small>Periksa koneksi atau pastikan sheet sudah dipublikasikan.</small>
        </div>`;
    });
    document.getElementById('loadData').remove();
  </script>
</div>
</body>
</html>
